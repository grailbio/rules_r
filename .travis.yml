sudo: required

services:
  - docker

addons:
  apt:
    sources:
    - sourceline: 'deb [arch=amd64] http://storage.googleapis.com/bazel-apt stable jdk1.8'
      key_url: 'https://bazel.build/bazel-release.pub.gpg'
    - sourceline: 'ppa:marutter/rrutter'
    packages:
    - bazel
    - r-recommended

script:
  - cd tests
  - bazel build //...
  - bazel test //...
  - ./binary/execution_tests.sh
  - ./r_image/e2e_tests.sh
